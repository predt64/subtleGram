# SubtleGram API Reference

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è REST API –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å—É–±—Ç–∏—Ç—Ä–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º AI –º–æ–¥–µ–ª–µ–π OpenRouter. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤ SRT/VTT/TXT —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –≤—ã–±–æ—Ä–æ–º –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è](#–æ–±—â–∞—è-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è)
- [Health Check](#health-check)
- [Health Check —Å–µ—Ä–≤–∏—Å–∞ —Å—É–±—Ç–∏—Ç—Ä–æ–≤](#health-check-—Å–µ—Ä–≤–∏—Å–∞-—Å—É–±—Ç–∏—Ç—Ä–æ–≤)
- [–ó–∞–≥—Ä—É–∑–∫–∞ —Å—É–±—Ç–∏—Ç—Ä–æ–≤](#–∑–∞–≥—Ä—É–∑–∫–∞-—Å—É–±—Ç–∏—Ç—Ä–æ–≤)
- [–ê–Ω–∞–ª–∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π](#–∞–Ω–∞–ª–∏–∑-–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π)
- [–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö](#—Ç–∏–ø—ã-–¥–∞–Ω–Ω—ã—Ö)
- [–ö–æ–¥—ã –æ—à–∏–±–æ–∫](#–∫–æ–¥—ã-–æ—à–∏–±–æ–∫)
- [–õ–∏–º–∏—Ç—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è](#–ª–∏–º–∏—Ç—ã-–∏-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)

## –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **Base URL:** `http://localhost:3001`
- **Content-Type:** `application/json` –¥–ª—è JSON –∑–∞–ø—Ä–æ—Å–æ–≤, `multipart/form-data` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –¢—Ä–µ–±—É–µ—Ç—Å—è API –∫–ª—é—á OpenRouter –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `Authorization` –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **Rate Limiting:** 100 –∑–∞–ø—Ä–æ—Å–æ–≤ / 15 –º–∏–Ω—É—Ç —Å –æ–¥–Ω–æ–≥–æ IP
- **CORS:** –†–∞–∑—Ä–µ—à–µ–Ω—ã –∑–∞–ø—Ä–æ—Å—ã —Å `http://localhost:3000` (frontend)
- **–§–æ—Ä–º–∞—Ç—ã —Å—É–±—Ç–∏—Ç—Ä–æ–≤:** SRT, VTT, TXT (–¥–æ 10MB)

## Health Check

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –±–∞–∑–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

### GET /health

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –±–∞–∑–æ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫.

**Headers:**

```
Content-Type: application/json
```

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**

```bash
curl -X GET http://localhost:3001/health
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã:**

#### ‚úÖ 200 OK

```json
{
  "status": "OK",
  "timestamp": "2025-01-24T10:30:00.000Z",
  "environment": "development"
}
```

#### ‚ùå 500 Internal Server Error

```json
{
  "error": "–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞",
  "message": "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞"
}
```

---

## –ó–∞–≥—Ä—É–∑–∫–∞ —Å—É–±—Ç–∏—Ç—Ä–æ–≤

–ó–∞–≥—Ä—É–∑–∫–∞ –∏ –ø–∞—Ä—Å–∏–Ω–≥ —Ñ–∞–π–ª–æ–≤ —Å—É–±—Ç–∏—Ç—Ä–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ SRT, VTT –∏–ª–∏ TXT.

### POST /api/subtitles/upload

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–∞–π–ª —Å—É–±—Ç–∏—Ç—Ä–æ–≤, –ø–∞—Ä—Å–∏—Ç –µ–≥–æ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.

**Content-Type:** `multipart/form-data`

**Headers:**

```
Content-Type: multipart/form-data
```

**Body (form-data):**
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|-------------|----------|
| `subtitle` | File | –î–∞ | –§–∞–π–ª —Å—É–±—Ç–∏—Ç—Ä–æ–≤ (.srt, .vtt –∏–ª–∏ .txt) |

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**

```bash
curl -X POST http://localhost:3001/api/subtitles/upload \
  -F "subtitle=@example.srt"
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã:**

#### ‚úÖ 200 OK

```json
{
  "success": true,
  "message": "–§–∞–π–ª —Å—É–±—Ç–∏—Ç—Ä–æ–≤ —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω",
  "data": {
    "filename": "example.srt",
    "subtitlesCount": 3,
    "subtitles": [
      {
        "id": 1,
        "start": "00:00:01,000",
        "end": "00:00:04,000",
        "text": "Hello world!"
      },
      {
        "id": 2,
        "start": "00:00:05,000",
        "end": "00:00:08,000",
        "text": "This is a test."
      },
      {
        "id": 3,
        "start": "00:00:09,000",
        "end": "00:00:12,000",
        "text": "How are you?"
      }
    ]
  }
}
```

#### ‚ùå 400 Bad Request - –§–∞–π–ª –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω

```json
{
  "error": "–§–∞–π–ª –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω",
  "message": "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª —Å—É–±—Ç–∏—Ç—Ä–æ–≤ (.srt, .vtt –∏–ª–∏ .txt)"
}
```

#### ‚ùå 400 Bad Request - –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞

```json
{
  "error": "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å—É–±—Ç–∏—Ç—Ä–æ–≤",
  "message": "–ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã–º —Ñ–∞–π–ª–æ–º —Å—É–±—Ç–∏—Ç—Ä–æ–≤"
}
```

#### ‚ùå 400 Bad Request - –§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π

```json
{
  "error": "–§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π",
  "message": "–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –¥–æ–ø—É—Å—Ç–∏–º—ã–π –ª–∏–º–∏—Ç"
}
```

---

## –ê–Ω–∞–ª–∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π

–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö AI –º–æ–¥–µ–ª–µ–π –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å Urban Dictionary.

### POST /api/subtitles/analyze

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ª–∏–Ω–≥–≤–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º AI –º–æ–¥–µ–ª–µ–π OpenRouter.

**Content-Type:** `application/json`

**Headers:**

```
Content-Type: application/json
```

**Body (JSON):**

```typescript
{
  "sentenceText": "You're gonna have to stay out of the way, Liv.",  // –¢–µ–∫—Å—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  "context": {                           // –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ —Å—É–±—Ç–∏—Ç—Ä–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    "prev": "What are you doing?",       // –ü—Ä–µ–¥—ã–¥—É—â–∞—è —Ä–µ–ø–ª–∏–∫–∞
    "next": "This is not your concern."  // –°–ª–µ–¥—É—é—â–∞—è —Ä–µ–ø–ª–∏–∫–∞
  },
  "seriesName": "iZombie"                 // –ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
}
```

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**

```bash
curl -X POST http://localhost:3001/api/subtitles/analyze \
  -H "Content-Type: application/json" \
  -d '{
    "sentenceText": "I'\''m here, Ravi.",
    "context": {
      "prev": "Ravi, I need you to go to Major",
      "next": "and find out where the bodies are"
    },
    "seriesName": "The Walking Dead"
  }'
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –º–æ–¥–µ–ª–∏** - —Å–∏—Å—Ç–µ–º–∞ –≤—ã–±–∏—Ä–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é –±–µ—Å–ø–ª–∞—Ç–Ω—É—é AI –º–æ–¥–µ–ª—å
2. **–õ–∏–Ω–≥–≤–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑** - –¥–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏, –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –∏ —É—Ä–æ–≤–Ω—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–µ–Ω–≥–∞** - –∑–∞–ø—Ä–æ—Å –∫ Urban Dictionary API –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–¥–∏–æ–º
4. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞** - —Å–æ–∑–¥–∞–Ω–∏–µ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏ –¥–æ—Å–ª–æ–≤–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø–µ—Ä–µ–≤–æ–¥–∞
5. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** - –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –æ–±—Å–ª—É–∂–∏–≤–∞—é—Ç—Å—è –∏–∑ –∫—ç—à–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

- **segments[]** - –º–∞—Å—Å–∏–≤ —Å–µ–≥–º–µ–Ω—Ç–æ–≤ —Å –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –∏ —É—Ä–æ–≤–Ω–µ–º —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
- **translations[]** - –≤–∞—Ä–∏–∞–Ω—Ç—ã –ø–µ—Ä–µ–≤–æ–¥–∞ (–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∏ –¥–æ—Å–ª–æ–≤–Ω—ã–π) —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º–∏
- **slang[]** - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–ª–µ–Ω–≥–æ–≤—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π –∏–∑ Urban Dictionary
- **metadata** - –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏, timestamp, –∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è AI –º–æ–¥–µ–ª—å

**–í–æ–∑–º–æ–∂–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã:**

#### ‚úÖ 200 OK

```json
{
  "success": true,
  "message": "–ê–Ω–∞–ª–∏–∑ —Å –ø–æ–º–æ—â—å—é AI –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ",
  "data": {
    "analysis": {
      "segments": [
        {
          "text": "You're gonna have to stay out of the way, Liv.",
          "difficulty": {
            "cefr": "B2"
          },
          "features": [
            {
              "rule": "Present Simple",
              "russian": "Present Simple"
            },
            {
              "rule": "Contraction 'I am'",
              "russian": "–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ 'I am'"
            }
          ]
        }
      ],
      "translations": [
        {
          "variants": [
            {
              "style": "natural",
              "text": "–¢–µ–±–µ –ø—Ä–∏–¥–µ—Ç—Å—è –Ω–µ –ø—É—Ç–∞—Ç—å—Å—è –ø–æ–¥ –Ω–æ–≥–∞–º–∏, –õ–∏–≤."
            },
            {
              "style": "literal",
              "text": "–¢—ã —Å–æ–±–∏—Ä–∞–µ—à—å—Å—è –∏–º–µ—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –≤–Ω–µ –ø—É—Ç–∏, –õ–∏–≤."
            }
          ],
          "explanation": "–§—Ä–∞–∑–∞ 'You're gonna have to stay out of the way, Liv.' —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–∞–∑–≥–æ–≤–æ—Ä–Ω—É—é –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—é 'gonna' (going to), –º–æ–¥–∞–ª—å–Ω—ã–π –≥–ª–∞–≥–æ–ª 'have to' –¥–ª—è –≤—ã—Ä–∞–∂–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, –∏ –ø–æ–≤–µ–ª–∏—Ç–µ–ª—å–Ω–æ–µ –Ω–∞–∫–ª–æ–Ω–µ–Ω–∏–µ. –£—Ä–æ–≤–µ–Ω—å B2 –∏–∑-–∑–∞ —Å–ª–æ–∂–Ω–æ–π –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –∏–¥–∏–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è."
        }
      ],
      "slang": [
        {
          "term": "gonna",
          "ud": {
            "definition": "Going to - contraction used in informal speech",
            "example": "I'm gonna stay home tonight",
            "permalink": "https://urbandictionary.com/define.php?term=gonna"
          }
        }
      ]
    },
    "metadata": {
      "processingTimeMs": 1250,
      "timestamp": "2025-01-24T10:30:00.000Z",
      "model": "mistral-small-3.2-24b-instruct + GPT-OSS-20B (fallback)",
      "validationWarnings": []
    }
  }
}
```

#### ‚ùå 400 Bad Request - sentenceText –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞

```json
{
  "success": false,
  "message": "sentenceText (—Ç–µ–∫—Å—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è) –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞"
}
```

#### ‚ùå 400 Bad Request - –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

```json
{
  "error": "–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏",
  "message": "–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å—É–±—Ç–∏—Ç—Ä–æ–≤",
  "details": {
    "errors": ["–ü–æ–ª–µ 'text' –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ"],
    "warnings": ["–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏"]
  }
}
```

#### ‚ùå 401 Unauthorized - –ù–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω

```json
{
  "error": "–û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏",
  "message": "–ù–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π —Ç–æ–∫–µ–Ω OpenRouter"
}
```

#### ‚ùå 429 Too Many Requests - Rate limit

```json
{
  "error": "–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤",
  "message": "–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤. –ü–æ–¥–æ–∂–¥–∏—Ç–µ –ø–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–æ–π.",
  "retryAfter": 60
}
```

#### ‚ùå 408 Request Timeout - –¢–∞–π–º–∞—É—Ç

```json
{
  "error": "–¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–∞",
  "message": "–ê–Ω–∞–ª–∏–∑ –∑–∞–Ω—è–ª —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å –º–µ–Ω—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å—É–±—Ç–∏—Ç—Ä–æ–≤."
}
```

#### ‚ùå 503 Service Unavailable - AI –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

```json
{
  "error": "–°–µ—Ä–≤–∏—Å –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω",
  "message": "–°–ª—É–∂–±–∞ AI —Å–µ–π—á–∞—Å –∑–∞–Ω—è—Ç–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ."
}
```

#### ‚ùå 502 Bad Gateway - –û—à–∏–±–∫–∞ AI

```json
{
  "error": "–û—à–∏–±–∫–∞ –æ—Ç–≤–µ—Ç–∞ AI",
  "message": "–ü–æ–ª—É—á–µ–Ω –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç —Å–ª—É–∂–±—ã AI. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑."
}
```

---

## Health Check —Å–µ—Ä–≤–∏—Å–∞ —Å—É–±—Ç–∏—Ç—Ä–æ–≤

–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ —Å–µ—Ä–≤–∏—Å–∞ —Å—É–±—Ç–∏—Ç—Ä–æ–≤.

### GET /api/subtitles/health

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–∞ —Å—É–±—Ç–∏—Ç—Ä–æ–≤, –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –∏ —Ñ—É–Ω–∫—Ü–∏–π.

**Headers:**

```
Content-Type: application/json
```

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**

```bash
curl -X GET http://localhost:3001/api/subtitles/health
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã:**

#### ‚úÖ 200 OK

```json
{
  "status": "OK",
  "service": "subtitles",
  "aiModel": "mistral-small-3.2-24b-instruct + GPT-OSS-20B (fallback)",
  "models": {
    "primary": {
      "name": "mistral/mistral-small-3.2-24b-instruct:free",
      "provider": "Mistral",
      "description": "–û—Å–Ω–æ–≤–Ω–∞—è –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –º–æ–¥–µ–ª—å Mistral —Å –≤—ã—Å–æ–∫–∏–º –∫–∞—á–µ—Å—Ç–≤–æ–º –∞–Ω–∞–ª–∏–∑–∞"
    },
    "fallback": {
      "name": "openai/gpt-oss-20b:free",
      "provider": "OpenAI",
      "description": "–†–µ–∑–µ—Ä–≤–Ω–∞—è –º–æ–¥–µ–ª—å –Ω–∞ –±–∞–∑–µ GPT –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏"
    }
  },
  "endpoints": [
    {
      "path": "POST /upload",
      "description": "–ó–∞–≥—Ä—É–∑–∫–∞ –∏ –ø–∞—Ä—Å–∏–Ω–≥ —Ñ–∞–π–ª–æ–≤ —Å—É–±—Ç–∏—Ç—Ä–æ–≤",
      "limits": "10MB, —Ñ–æ—Ä–º–∞—Ç—ã: .srt, .vtt, .txt"
    },
    {
      "path": "POST /analyze",
      "description": "–ê–Ω–∞–ª–∏–∑ —Å—É–±—Ç–∏—Ç—Ä–æ–≤ —Å –ø–æ–º–æ—â—å—é AI",
      "rateLimit": "100 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ 15 –º–∏–Ω—É—Ç"
    }
  ],
  "features": ["–ê–Ω–∞–ª–∏–∑ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —Ç–µ–∫—Å—Ç–∞", "–û—Ü–µ–Ω–∫–∞ —Å–ª–æ–≤–∞—Ä–Ω–æ–≥–æ –∑–∞–ø–∞—Å–∞", "–ü—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏", "–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑"]
}
```

---

## –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

### SubtitleEntry

```typescript
{
  id: number; // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID (1, 2, 3...)
  start: string; // –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ "00:00:01,000"
  end: string; // –í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è "00:00:04,000"
  text: string; // –¢–µ–∫—Å—Ç —Å—É–±—Ç–∏—Ç—Ä–∞
}
```

### GrammarFeature

```typescript
{
  rule: string; // –ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–∞–≤–∏–ª–∞ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
  russian: string; // –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º
}
```

### TranslationVariant

```typescript
{
  style: 'natural' | 'literal'; // –°—Ç–∏–ª—å –ø–µ—Ä–µ–≤–æ–¥–∞
  text: string; // –¢–µ–∫—Å—Ç –ø–µ—Ä–µ–≤–æ–¥–∞
}
```

### Difficulty

```typescript
{
  cefr: string; // –£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ CEFR (A1-C2)
}
```

### TranslationSegment

```typescript
{
  text: string;       // –¢–µ–∫—Å—Ç —Å–µ–≥–º–µ–Ω—Ç–∞
  difficulty: {
    cefr: string;     // –£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ (B1, C1, etc.)
  };
  features: GrammarFeature[];
}
```

### TranslationData

```typescript
{
  variants: TranslationVariant[];     // –í–∞—Ä–∏–∞–Ω—Ç—ã –ø–µ—Ä–µ–≤–æ–¥–∞
  explanation: string;                // –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏
}
```

### TranslationGuide

```typescript
{
  segments: TranslationSegment[];     // –°–µ–≥–º–µ–Ω—Ç—ã –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞
  translations: TranslationData[];    // –ü–µ—Ä–µ–≤–æ–¥—ã –∏ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è
  slang: SlangCard[];                 // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–ª–µ–Ω–≥–∞
}
```

### SlangCard

```typescript
{
  term: string; // –°–ª–µ–Ω–≥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "gotta")
  ud: {
    definition: string; // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–∑ UD
    example: string; // –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
    permalink: string; // –°—Å—ã–ª–∫–∞ –Ω–∞ UD
  }
}
```

---

## –ö–æ–¥—ã –æ—à–∏–±–æ–∫

| –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ              | –ü—Ä–∏—á–∏–Ω–∞                                       |
| --- | --------------------- | --------------------------------------------- |
| 200 | OK                    | –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å                               |
| 400 | Bad Request           | –ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è         |
| 401 | Unauthorized          | –ù–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π OPENROUTER_API_KEY |
| 404 | Not Found             | –≠–Ω–¥–ø–æ–∏–Ω—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç                        |
| 408 | Request Timeout       | –ó–∞–ø—Ä–æ—Å –∑–∞–Ω—è–ª —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏            |
| 429 | Too Many Requests     | –ü—Ä–µ–≤—ã—à–µ–Ω rate limit (100/15–º–∏–Ω)               |
| 500 | Internal Server Error | –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞                     |
| 502 | Bad Gateway           | –û—à–∏–±–∫–∞ –æ—Ç–≤–µ—Ç–∞ AI                              |
| 503 | Service Unavailable   | AI —Å–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω                          |

---

## –õ–∏–º–∏—Ç—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### –§–∞–π–ª—ã

- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä:** 10MB
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:** .srt, .vtt, .txt
- **MIME —Ç–∏–ø—ã:** text/plain, application/octet-stream, text/vtt

### API

- **Rate Limiting:** 100 –∑–∞–ø—Ä–æ—Å–æ–≤ / 15 –º–∏–Ω—É—Ç —Å –æ–¥–Ω–æ–≥–æ IP
- **–¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–∞:** 30 —Å–µ–∫—É–Ω–¥
- **–ú–∞–∫—Å–∏–º—É–º –¥–ª–∏–Ω—ã –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:** 1000 —Å–∏–º–≤–æ–ª–æ–≤

### AI –ú–æ–¥–µ–ª—å

- **–ü—Ä–æ–≤–∞–π–¥–µ—Ä:** OpenRouter
- **–û—Å–Ω–æ–≤–Ω–∞—è –º–æ–¥–µ–ª—å:** mistral/mistral-small-3.2-24b-instruct:free (mistral-small-3.2-24b-instruct - –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ)
- **–†–µ–∑–µ—Ä–≤–Ω–∞—è –º–æ–¥–µ–ª—å:** openai/gpt-oss-20b:free (GPT-OSS 20B - –¥–ª—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏)
- **–ú–∞–∫—Å–∏–º—É–º —Ç–æ–∫–µ–Ω–æ–≤:** 2000 –Ω–∞ –æ—Ç–≤–µ—Ç
- **–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞:** 0.4 (–¥–ª—è —Ç–æ—á–Ω—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤)
- **–¢–∞–π–º–∞—É—Ç:** 30 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∑–∞–ø—Ä–æ—Å
- **–ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏:** 3 —Ä–∞–∑–∞ —Å fallback –Ω–∞ –¥—Ä—É–≥–∏–µ –º–æ–¥–µ–ª–∏

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ü–æ–ª–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã

```bash
# 1. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª
curl -X POST http://localhost:3001/api/subtitles/upload \
  -F "subtitle=@movie.srt"

# 2. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ
curl -X POST http://localhost:3001/api/subtitles/analyze \
  -H "Content-Type: application/json" \
  -d '{
    "sentenceText": "You'\''re gonna have to stay out of the way, Liv.",
    "context": {
      "prev": "What are you doing?",
      "next": "This is not your concern."
    },
    "seriesName": "iZombie"
  }'
```

### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```bash
# –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤
curl -X POST http://localhost:3001/api/subtitles/analyze \
  -H "Content-Type: application/json" \
  -d '{"subtitles":[],"sentenceText":"I gotta go."}'

# –û—Ç–≤–µ—Ç: 429 Too Many Requests
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è

```bash
curl http://localhost:3001/health
# –û—Ç–≤–µ—Ç: {"status":"OK","timestamp":"...","environment":"development"}
```

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í—Å–µ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç curl. –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTP –∫–ª–∏–µ–Ω—Ç (fetch, axios –∏ —Ç.–¥.)
