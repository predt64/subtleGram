# SubtleGram Backend

AI-powered –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Å—É–±—Ç–∏—Ç—Ä–æ–≤ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ –Ω–∞ –±–∞–∑–µ OpenRouter —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –≤—ã–±–æ—Ä–æ–º –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π.

## üéØ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å—É–±—Ç–∏—Ç—Ä—ã –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö —Ñ–∏–ª—å–º–æ–≤/—Å–µ—Ä–∏–∞–ª–æ–≤ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π –ª–∏–Ω–≥–≤–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è —è–∑—ã–∫–∞:

- **–ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π** —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ —Å—Ç–∏–ª–µ–π (–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π/–¥–æ—Å–ª–æ–≤–Ω—ã–π)
- **–û–±—ä—è—Å–Ω–µ–Ω–∏—è –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏** –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–ª–µ–Ω–≥–∞** –∏–∑ Urban Dictionary API
- **–£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏** –ø–æ —à–∫–∞–ª–µ CEFR (A1-C2)
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑** —Å —É—á–µ—Ç–æ–º –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö/—Å–ª–µ–¥—É—é—â–∏—Ö —Ä–µ–ø–ª–∏–∫

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
cd back
npm install
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

#### 1. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á OpenRouter

- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [openrouter.ai](https://openrouter.ai/keys)
- –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –∏ –ø–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á
- **–ú–æ–¥–µ–ª–∏:** –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –º–æ–¥–µ–ª–∏ –∏–∑ —Ç–æ–ø–∞ OpenRouter

#### 2. –°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª:

```env
PORT=3001
NODE_ENV=development
OPENROUTER_API_KEY=your_openrouter_api_key_here
FRONTEND_URL=http://localhost:3000

```

### –ó–∞–ø—É—Å–∫

```bash
npm run dev  # —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
npm start    # –ø—Ä–æ–¥–∞–∫—à–Ω
```

–°–µ—Ä–≤–µ—Ä: `http://localhost:3001`

## üìÅ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
src/
‚îú‚îÄ‚îÄ controllers/         # HTTP –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ API
‚îÇ   ‚îú‚îÄ‚îÄ analyzeController.ts   # –ê–Ω–∞–ª–∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ uploadController.ts    # –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –ø–∞—Ä—Å–∏–Ω–≥ —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ routes/              # Express –º–∞—Ä—à—Ä—É—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ subtitles.ts           # API —Å—É–±—Ç–∏—Ç—Ä–æ–≤ (/api/subtitles/*)
‚îú‚îÄ‚îÄ services/            # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ analysisService.ts     # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ openRouterService.ts   # OpenRouter AI –∫–ª–∏–µ–Ω—Ç —Å fallback
‚îÇ   ‚îú‚îÄ‚îÄ slangService.ts        # Urban Dictionary API
‚îÇ   ‚îî‚îÄ‚îÄ subtitleParserService.ts # –ü–∞—Ä—Å–∏–Ω–≥ SRT/VTT/TXT —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ types/               # TypeScript –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ index.ts               # –í—Å–µ —Ç–∏–ø—ã –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ utils/               # –£—Ç–∏–ª–∏—Ç—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ config.ts              # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥–µ–ª–µ–π –∏ API
‚îÇ   ‚îú‚îÄ‚îÄ errorHandler.ts        # –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
‚îÇ   ‚îî‚îÄ‚îÄ validation.ts          # –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
‚îî‚îÄ‚îÄ index.ts             # Express —Å–µ—Ä–≤–µ—Ä –∏ middleware
```

## üìñ API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–ª–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è API –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ **[API-README.md](API-README.md)**

### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

- `GET /health` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–µ—Ä–∞
- `POST /api/subtitles/upload` - –∑–∞–≥—Ä—É–∑–∫–∞ —Å—É–±—Ç–∏—Ç—Ä–æ–≤ (SRT/VTT/TXT)
- `POST /api/subtitles/analyze` - AI –∞–Ω–∞–ª–∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π —Å Urban Dictionary
- `GET /api/subtitles/health` - —Å—Ç–∞—Ç—É—Å AI –º–æ–¥–µ–ª–µ–π –∏ —Å–µ—Ä–≤–∏—Å–∞

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–õ–∏–Ω–≥–≤–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑** –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —É—Ä–æ–≤–Ω—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ (CEFR)
- **–ì—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–±–æ—Ä** —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- **–ü–µ—Ä–µ–≤–æ–¥—ã** —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ —Å—Ç–∏–ª–µ–π (–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π/–¥–æ—Å–ª–æ–≤–Ω—ã–π)
- **–°–ª–µ–Ω–≥ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ** —á–µ—Ä–µ–∑ Urban Dictionary API
- **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üöÄ –ó–∞–ø—É—Å–∫ –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
npm run dev     # —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å –∞–≤—Ç–æ-–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π
npm run build   # —Å–±–æ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
npm start       # –∑–∞–ø—É—Å–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------------|----------|--------------|
| `PORT` | –ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ | `3001` |
| `OPENROUTER_API_KEY` | API —Ç–æ–∫–µ–Ω OpenRouter | _–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ_ |
| `FRONTEND_URL` | URL —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ | `http://localhost:3000` |

## üõ†Ô∏è –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- **Backend**: Node.js + Express.js + TypeScript
- **AI**: OpenRouter API (Mistral + GPT fallback)
- **–°–ª–µ–Ω–≥**: Urban Dictionary API
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: Rate limiting, CORS, Helmet.js
- **–§–∞–π–ª—ã**: Multer –¥–ª—è multipart –∑–∞–≥—Ä—É–∑–∫–∏

---

üìñ **–ü–æ–¥—Ä–æ–±–Ω–∞—è API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: [API-README.md](API-README.md)
